<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>system message</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  height: 100vh;
  overflow: hidden;
  font-family: "Courier New", Courier, monospace;
  background:
    radial-gradient(circle at 20% 30%, rgba(80,80,90,0.18), transparent 60%),
    radial-gradient(circle at 80% 70%, rgba(40,60,70,0.18), transparent 55%),
    linear-gradient(180deg, #0a0a0a, #050505);
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background-image:
    repeating-linear-gradient(
      0deg,
      rgba(255,255,255,0.015),
      rgba(255,255,255,0.015) 1px,
      transparent 1px,
      transparent 2px
    ),
    repeating-linear-gradient(
      90deg,
      rgba(255,255,255,0.01),
      rgba(255,255,255,0.01) 1px,
      transparent 1px,
      transparent 3px
    );
  pointer-events: none;
}

/* POPUP */
.popup {
  width: 380px;
  background-color: #121212;
  border: 1px solid #2a2a2a;
  box-shadow: 0 6px 18px rgba(0,0,0,0.9);
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
}

.titlebar {
  padding: 6px 8px;
  font-size: 12px;
  color: #8f8f8f;
  background-color: #161616;
  border-bottom: 1px solid #2a2a2a;
}

.content {
  padding: 16px;
  font-size: 13px;
  color: #b8b8b8;
  line-height: 1.5;
}

.actions {
  padding: 10px;
  display: flex;
  justify-content: flex-end;
}

.btn {
  padding: 3px 14px;
  font-size: 12px;
  background-color: #1a1a1a;
  color: #b0b0b0;
  border: 1px solid #333;
}

/* CONSOLE */
.console {
  position: fixed;
  inset: 0;
  background-color: rgba(8,8,8,0.96);
  color: #bdbdbd;
  font-size: 13px;
  padding: 24px;
  display: none;
  z-index: 10;
}

.console-output {
  white-space: pre-wrap;
  line-height: 1.45;
  margin-bottom: 8px;
}

.console-input {
  border: none;
  outline: none;
  background: transparent;
  color: #bdbdbd;
  font-family: inherit;
  font-size: 13px;
  width: 100%;
}

/* IMAGE ARCHIVE */
.archive {
  position: fixed;
  inset: 0;
  display: none;
  background-color: rgba(0,0,0,0.9);
  justify-content: center;
  align-items: center;
  z-index: 20;
}

.archive img {
  max-width: 90%;
  max-height: 90%;
  border: 2px solid #555;
  filter: grayscale(40%) contrast(90%);
}
</style>
</head>

<body>

<!-- POPUP PRINCIPAL -->
<div class="popup">
  <div class="titlebar">system message</div>
  <div class="content">
    <p>An internal process was interrupted.</p>
    <p>The current state cannot be verified.</p>
    <p>Further action is not recommended.</p>
  </div>
  <div class="actions">
    <div class="btn">OK</div>
  </div>
</div>

<!-- CONSOLE -->
<div class="console" id="console">
  <div class="console-output" id="output">
> runtime shell initialized
> integrity check : failed
> archive status : inconsistent

> _
  </div>
  <input class="console-input" id="input" autocomplete="off">
</div>

<!-- IMAGE ARCHIVE -->
<div class="archive" id="archive">
  <img src="archive.jpg" alt="archive image">
</div>

<!-- SONS -->
<audio id="hum" loop>
  <source src="hum.mp3" type="audio/mpeg">
</audio>
<audio id="glitch">
  <source src="glitch.mp3" type="audio/mpeg">
</audio>

<script>
const sequence = ["z","e","r","o"];
let seqIndex = 0;

const consoleEl = document.getElementById("console");
const input = document.getElementById("input");
const output = document.getElementById("output");
const archiveEl = document.getElementById("archive");
const hum = document.getElementById("hum");
const glitch = document.getElementById("glitch");

document.addEventListener("keydown", e => {
  if (e.key.toLowerCase() === sequence[seqIndex]) {
    seqIndex++;
    if (seqIndex === sequence.length) {
      consoleEl.style.display = "block";
      input.focus();
      // sons subtils
      hum.volume = 0.05;
      hum.play().catch(()=>{});
      glitch.volume = 0.2;
      glitch.play().catch(()=>{});
      seqIndex = 0;
    }
  } else {
    seqIndex = 0;
  }
});

let attempts = 0;

input.addEventListener("keydown", e => {
  if(e.key==="Enter"){
    const val = input.value.trim().toLowerCase();
    input.value="";

    if(val==="will"){
      archiveEl.style.display="flex";
      return;
    }

    output.textContent += `\n> ${val}\n> invalid command\n`;
    attempts++;
    if(attempts>=3){
      output.textContent += `\n> access denied: you are not welcome\n`;
      input.disabled=true;
    }
  }
});

// fermer l'image archive
archiveEl.addEventListener("click", ()=>{
  archiveEl.style.display="none";
});
</script>

</body>
</html>
